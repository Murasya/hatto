<ons-page>
  <ons-toolbar>
    <div class="left"><ons-back-button></ons-back-button></div>
    <div class="center">アカウント</div>
  </ons-toolbar>
  <div id="signIn">
    <p>E-mail</p>
    <ons-input type="email" id="email" placeholder="メールアドレス" modifier="underbar"></ons-input>
    <p>Password</p>
    <ons-input type="password" id="password" placeholder="パスワード" modifier="underbar"></ons-input><br>
    <input type="button" value="ログイン" class="btn" id="login_account"><br>
    <input type="button" value="新規登録" class="btn" id="new_account">
  </div>
  <div class="back">
    <a onclick="document.querySelector('#myNavigator').popPage();"><img src="./images/BACK.png" width="30px"></a>
  </div>
  <script>
    ons.getScriptPage().onShow = function() {
      document.getElementById("login_account").onclick = function() {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        firebase.auth().signInWithEmailAndPassword(email, password)
          .then(function() {
            firebase.auth().onAuthStateChanged(function(user) {
              if (user) {
                var uid = user.uid;
                localStorage.setItem("uid", uid);
              } else {
              }
            });
            ons.notification.toast('ログイン成功', { timeout: 1000, animation: 'fall'})
            document.querySelector('#myNavigator').popPage();
          })
          .catch(function(error) {
            alert(error.message);
          });
      }
      document.getElementById("new_account").onclick = function() {
        document.querySelector('#myNavigator').pushPage("register.html");
      }
    }
  </script>
</ons-page>