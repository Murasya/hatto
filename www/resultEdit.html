<ons-page>
  <ons-toolbar>
    <div class="left"><ons-back-button></ons-back-button></div>
  </ons-toolbar>
  <p id="mainAnswer"></p>
  <div id="qandaEdit"></div>
  <input type="button" id="save" class="btn" value="記録する">
  <div class="back">
    <a onclick="document.querySelector('#myNavigator').popPage();"><img src="./images/BACK.png" width="30px"></a>
  </div>
  <script>
    // 入力 data.answers, data.questions
    ons.getScriptPage().onInit = function() {
      var id = this.data.id;
      var main = this.data.main;
      var pub = this.data.public;
      var memo = this.data.memo;
      var tags = this.data.tags;
      var resultAnswers = this.data.answers;
      var resultQuestions = this.data.questions;
      console.log(resultAnswers);
      console.log(resultQuestions);
      document.getElementById("mainAnswer").textContent = resultAnswers[0];
      resultAnswers.forEach(element => {
        var adiv = document.createElement('p');
        adiv.textContent = element;
        document.getElementById('qandaEdit').appendChild(adiv);
        if(element !== resultAnswers.slice(-1)[0]) {
          var arrow = document.createElement('p');
          arrow.textContent = "▼";
          document.getElementById('qandaEdit').appendChild(arrow);
        }
      });
      document.getElementById("save").onclick = function() {
        document.getElementById("myNavigator").pushPage('save.html', {
          data: {
            id: id,
            questions: resultQuestions,
            answers: resultAnswers,
            main: main,
            public: public,
            memo: memo,
            tags: tags
          }
        });
      }
    }
  </script>
</ons-page>